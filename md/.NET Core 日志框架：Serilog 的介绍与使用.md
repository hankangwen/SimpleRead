> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/g_c_RbZCVAXsqNXwRsm8Ig)

在. NET Core 开发中，日志记录是一个不可或缺的功能。Serilog 是一个流行的. NET 日志框架，它提供了丰富的日志记录功能、灵活的日志配置以及强大的结构化日志输出能力。本文将向您介绍 Serilog 的基本使用，并通过示例代码展示如何在. NET Core 项目中集成和使用 Serilog。

### Serilog 的特点

*   **结构化日志**：Serilog 支持结构化日志记录，可以方便地捕获和查询日志中的详细信息。
    
*   **可扩展性**：Serilog 提供了丰富的插件系统，支持多种日志接收器（sink），如控制台、文件、数据库等。
    
*   **灵活的日志级别**：支持不同的日志级别，如 Verbose、Debug、Information、Warning、Error 和 Fatal。
    

### 安装 Serilog

在. NET Core 项目中，您可以使用 NuGet 包管理器来安装 Serilog 和相关的插件。以下是在项目中安装 Serilog 及其控制台接收器（sink）的命令：

```
dotnet add package Serilog<br style="visibility: visible;">dotnet add package Serilog.Sinks.Console<br style="visibility: visible;">
```

### 配置和使用 Serilog

在. NET Core 应用程序中配置 Serilog 主要包括以下几个步骤：

1.  **初始化 Serilog**：在程序的入口点（如 `Program.cs` 文件）中初始化 Serilog。
    
2.  **配置日志接收器**：为您想要输出的日志目标配置接收器，如控制台、文件等。
    
3.  **记录日志**：在代码中使用 Serilog 的 API 记录日志。
    

下面是一个简单的示例，展示了如何在. NET Core 控制台应用程序中集成 Serilog：

```
using Serilog;using System;class Program{    static void Main(string[] args)    {        // 1. 初始化 Serilog，并配置控制台接收器        Log.Logger = new LoggerConfiguration()            .MinimumLevel.Debug() // 设置最小的日志级别            .WriteTo.Console()    // 配置控制台接收器            .CreateLogger();                // 2. 记录日志        Log.Information("Hello, Serilog!");        Log.Warning("This is a warning message.");        Log.Error("An error occurred: {@Exception}", new Exception("Something went wrong."));                // 3. 在程序结束时，确保刷新并关闭所有日志接收器        Log.CloseAndFlush();    }}
```

在上面的示例中，我们首先通过 `LoggerConfiguration` 类配置了 Serilog 的日志级别和接收器。`.MinimumLevel.Debug()` 设置了记录的最小日志级别为 Debug，`.WriteTo.Console()` 配置了控制台接收器。然后，我们使用 `Log.Information()`, `Log.Warning()`, 和 `Log.Error()` 方法记录不同级别的日志。最后，通过 `Log.CloseAndFlush()` 方法确保所有的日志都已经写入接收器并关闭它们。

### 结语

Serilog 是一个功能强大且灵活的日志框架，它可以轻松地集成到. NET Core 项目中。通过配置不同的接收器，您可以将日志输出到各种目标，如控制台、文件、数据库等。在开发过程中，合理地使用日志可以帮助您更好地了解程序的运行情况，定位并解决问题。