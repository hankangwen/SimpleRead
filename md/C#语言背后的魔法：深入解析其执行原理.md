> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/wNiYE60G1WCqvZd3Hc_DmQ)

C# 作为一种现代、类型安全且面向对象的编程语言，在. NET 框架中扮演着重要角色。它拥有简洁的语法、强大的库支持和跨平台的兼容性，这使得 C# 成为开发者的首选语言之一。但是，C# 代码是如何从高级语言转化为计算机能够理解的机器指令的呢？本文将带您深入探索 C# 的执行原理。

**1. 源码编译**

C# 代码首先以文本形式存在，即源代码。在编译阶段，C# 编译器（如 csc.exe）将源代码转换为中间语言（Intermediate Language，简称 IL）代码，这是一种类似于 Java 字节码的跨平台语言。编译后的 IL 代码存储在程序集（Assembly）中，通常是以. dll 或. exe 文件的形式存在。

**2. JIT 编译**

当程序运行时，Just-In-Time（JIT）编译器会将 IL 代码转换为机器代码。JIT 编译是动态发生的，它会在程序首次执行某段代码时进行编译，并将编译后的机器代码缓存在内存中，以便后续快速执行。这种编译方式结合了编译型语言和解释型语言的优点，既保证了程序的性能，又实现了跨平台兼容性。

**3. 运行时环境**

C# 的执行离不开. NET 运行时环境（CLR，Common Language Runtime）。CLR 负责内存管理、垃圾回收、异常处理、线程同步等底层操作，为 C# 代码提供了一个稳定、安全的运行环境。CLR 还提供了丰富的类库（如 System.Collections、System.IO 等），使得开发者能够更方便地实现各种功能。

**4. 跨平台支持**

随着. NET Core 和. NET 5/6/7 等版本的推出，C# 已经实现了跨平台支持。通过. NET Core 或. NET 5/6/7 运行时，C# 代码可以在 Windows、Linux、macOS 等多个操作系统上运行。这使得 C# 成为一种真正意义上的跨平台语言，为开发者提供了更大的灵活性和便利性。

**总结**

C# 的执行原理是一个复杂而精妙的过程，它涉及源码编译、JIT 编译、运行时环境和跨平台支持等多个方面。通过深入了解这些原理，我们可以更好地理解 C# 语言的特性和优势，从而更加熟练地运用它进行开发。同时，对于想要深入了解计算机底层原理的开发者来说，这也是一个值得探索的领域。